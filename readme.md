# Распределенный калькулятор арифметических выражений

## Описание
Данный проект представляет собой распределенный калькулятор, который выполняет обработку арифметических выражений. Архитектура включает:
- **Оркестратор** — принимает выражения, разбивает их на задачи и управляет вычислениями.
- **Агенты** — выполняют математические операции параллельно.
- **Веб-интерфейс** — визуализирует процесс вычислений

## Возможности
- Поддержка арифметических операций: `+`, `-`, `*`, `/`
- Приоритет операций и работа со скобками
- Поддержка больших чисел и точных вычислений
- Проверка валидности выражений
- Параллельные вычисления с распределением задач
- Логирование выполнения задач

## Предварительные требования
- **Go 1.24.0**
- **Docker**
- **Git**

## Установка
```sh
git clone git@github.com:w0ikid/megacalc.git
cd megacalc
go mod tidy  # Загрузка и синхронизация зависимостей
```

## Запуск
### Запуск с Docker
```sh
 docker-compose up --build -d  
```

### Web (в своем браузере)
```
localhost
```
### Важно

- Фронтенд (web/) обрабатывается Nginx, который монтируется в контейнере.
- Если веб-интерфейс не отображает данные, попробуйте:

```sh
curl -X GET "http://localhost:8080/api/v1/expressions"
```

## API эндпоинты
### Отправка выражения на вычисление
```sh
curl -X POST "http://localhost:8080/api/v1/calculate" \
     -H "Content-Type: application/json" \
     -d '{"expression":"2+2*2"}'
```
**Ответ:**
```json
{"id":"123e4567-e89b-12d3-a456-426614174000"}
```

### Получение списка всех выражений
```sh
curl -X GET "http://localhost:8080/api/v1/expressions"
```
**Ответ:**
```json
{
  "expressions": [
    {"id": "123e4567-e89b-12d3-a456-426614174000", "status": "completed", "result": 6}
  ]
}
```

### Получение конкретного выражения по ID
```sh
curl -X GET "http://localhost:8080/api/v1/expressions/123e4567-e89b-12d3-a456-426614174000"
```

## Тестирование
Запуск всех тестов
```sh
go test ./...
```

## Структура проекта
```plaintext
.
├── cmd
│   ├── agent
│   │   └── agent.go              # Агент, выполняющий вычисления
│   └── orchestrator
│       └── main.go               # Оркестратор, управляющий вычислениями
├── docker-compose.yml            # Конфигурация для Docker
├── Dockerfile.agent              # Dockerfile для агента
├── Dockerfile.orchestrator       # Dockerfile для оркестратора
├── go.mod                        # Зависимости Go
├── go.sum                        # Контрольные суммы зависимостей
├── internal
│   ├── agent
│   │   └── agent.go              # Логика агента
│   ├── api
│   │   ├── handler.go            # API обработчик
│   │   └── handler_test.go       # Тесты для обработчика API
│   └── service
│       ├── service.go            # Сервис, выполняющий обработку выражений
│       └── service_test.go       # Тесты для сервиса
├── nginx.conf                    # Конфигурация для Nginx
├── orchestrator                  # Папка с кодом оркестратора
├── pkg
│   └── errors
│       └── errors.go             # Обработка ошибок
├── readme.md                     # Описание проекта
└── web
    ├── index.html                # HTML страница для веб-интерфейса
    └── static
        ├── js
        │   └── main.js           # JavaScript для работы с веб-интерфейсом
        └── style.css             # Стили для веб-интерфейса
```

# Эта структура включает все ключевые компоненты, такие как:
```
cmd — основное место для запуска различных частей приложения (агентов и оркестратора).
docker-compose.yml — конфигурация для запуска проекта с помощью Docker.
internal — внутренние пакеты, реализующие логику вычислений и API.
web — фронтенд для визуализации результатов вычислений.
```
